<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>EcoInsight</title>
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
            rel="stylesheet"
        />
        <link rel="stylesheet" href="styles.css" />
    </head>
    <body>
        <div class="container-fluid">
            <div class="row">
                <div
                    class="col-12 d-flex justify-content-between align-items-center py-3"
                >
                    <button class="btn btn-light" id="sidebarToggle">☰</button>
                    <div class="dropdown">
                        <button
                            class="btn btn-secondary dropdown-toggle"
                            type="button"
                            id="dropdownMenuButton"
                            data-bs-toggle="dropdown"
                            aria-expanded="false"
                        >
                            UnityWater
                        </button>
                        <ul
                            class="dropdown-menu"
                            aria-labelledby="dropdownMenuButton"
                        >
                            <li><a class="dropdown-item" href="#">All</a></li>
                            <li>
                                <a class="dropdown-item" href="#">UnityWater</a>
                            </li>
                            <li>
                                <a class="dropdown-item" href="#"
                                    >Sunshine Coast Council</a
                                >
                            </li>
                            <li>
                                <a class="dropdown-item" href="#"
                                    >Moreton Bay Council</a
                                >
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="sidebar" id="sidebar">
                <div
                    class="d-flex justify-content-between align-items-center p-3"
                >
                    <h5 class="m-0">Previous Questions</h5>
                    <button class="btn btn-close" id="sidebarClose"></button>
                </div>
                <ul class="list-group list-group-flush" id="questionList">
                    <!-- Previous questions will be added here dynamically -->
                </ul>
            </div>
            <div class="content" id="content">
                <div class="row">
                    <div class="col-12">
                        <div class="response-area mb-3" id="responseArea">
                            <!-- Responses will be added here dynamically -->
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12 d-flex justify-content-center">
                        <input
                            type="text"
                            class="form-control text-input mb-3"
                            id="questionInput"
                            placeholder="Ask a question"
                        />
                    </div>
                </div>
            </div>
        </div>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
        <script>
            document.addEventListener('DOMContentLoaded', function () {
                const sidebarToggle = document.getElementById('sidebarToggle')
                const sidebarClose = document.getElementById('sidebarClose')
                const sidebar = document.getElementById('sidebar')
                const content = document.getElementById('content')
                const dropdownItems =
                    document.querySelectorAll('.dropdown-item')
                const dropdownButton =
                    document.getElementById('dropdownMenuButton')
                const questionInput = document.getElementById('questionInput')
                const responseArea = document.getElementById('responseArea')
                const questionList = document.getElementById('questionList')

                sidebarToggle.addEventListener('click', function () {
                    sidebar.classList.add('active')
                    content.classList.add('active')
                })

                sidebarClose.addEventListener('click', function () {
                    sidebar.classList.remove('active')
                    content.classList.remove('active')
                })

                dropdownItems.forEach((item) => {
                    item.addEventListener('click', function (e) {
                        e.preventDefault()
                        const councils = {
                            All: 'all.html',
                            UnityWater: 'unitywater.html',
                            'Sunshine Coast Council':
                                'sunshine-coast-council.html',
                            'Moreton Bay Council': 'moreton-bay-council.html'
                        }
                        const url = councils[this.textContent.trim()] || '#'
                        window.location.href = url
                        dropdownButton.textContent = this.textContent
                    })
                })

                questionInput.addEventListener('keypress', function (e) {
                    if (e.key === 'Enter') {
                        const question = this.value.trim()
                        if (question) {
                            addResponse('You: ' + question)
                            addQuestionToSidebar(question)
                            this.value = ''
                            
                            addTimedResponse("Thank you for your question about the water quality changes in the North Pine River from July 2018. It's great to see interest in local environmental conditions! Let's take a look at the data from July 5th, 2018, as an example to understand how various factors that are indicative of water quality were recorded on that day.")
                            addTimedResponse('Overview of Water Quality on July 5th, 2018')
                            addTimedResponse('Temperature: The water temperatures recorded range from 18.7°C in the early morning to 19.3°C by mid-morning, showing a slight increase as the day progresses. Temperature can affect the solubility of oxygen and the rates of biological and chemical processes in the water.')
                            addTimedResponse("Dissolved Oxygen: Levels varied from 6.2 mg/L early in the morning to a low of 4.2 mg/L. Higher dissolved oxygen is generally better as it indicates the water can support more aquatic life.")
                            addTimedResponse("pH Levels: The pH ranged slightly from 7.5 to 7.3, staying relatively neutral. Neutral pH is generally good for most aquatic organisms.")
                            addTimedResponse("E. coli Levels: There were minimal to moderate counts (from <1 to 11 E. coli units), indicating varying levels of bacterial contamination, which could be a concern for human health if the water is used for recreation or as a drinking source.")
                            addTimedResponse("Chlorophyll: The concentrations ranged from less than 1 to 2 μg/L. Low levels of chlorophyll a indicate lower amounts of algae and phytoplankton, which could mean less productivity in the water but also fewer issues with algal blooms.")
                            addTimedResponse("Nutrients (Phosphorus and Nitrogen): These nutrients showed little variation in their levels, suggesting stable inputs or processing within the water body. However, consistently high levels can lead to eutrophication, causing excessive growth of algae and aquatic plants.")
                        
                        }
                    }
                })

                
                function addTimedResponse(text) {
                    setTimeout(() => {
                        addResponse(text)
                    }, 1000)
                }





                function addResponse(text) {
                    let holder = 'p'
                    if (text.slice(0, 4) === 'You:') {
                        holder = 'b'
                    }
                    const p = document.createElement(holder)
                    p.textContent = text
                    responseArea.appendChild(p)
                    responseArea.scrollTop = responseArea.scrollHeight
                }

                function addQuestionToSidebar(question) {
                    const li = document.createElement('li')
                    li.className = 'list-group-item'
                    li.textContent = question
                    li.addEventListener('click', function () {
                        // Open a new window with the question and response
                        const newWindow = window.open('', '_blank')
                        newWindow.document.write('<h2>Question:</h2>')
                        newWindow.document.write('<p>' + question + '</p>')
                        newWindow.document.write('<h2>Response:</h2>')
                        newWindow.document.write(
                            '<p>This is a mock response to the question.</p>'
                        )
                    })
                    questionList.appendChild(li)
                }
            })
        </script>
    </body>
</html>
