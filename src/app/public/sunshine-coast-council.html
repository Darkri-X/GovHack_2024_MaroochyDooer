<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>OnlyInfo</title>
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
            rel="stylesheet"
        />
        <link rel="stylesheet" href="styles.css" />
    </head>
    <body>
        <div class="container-fluid">
            <div class="row">
                <div
                    class="col-12 d-flex justify-content-between align-items-center py-3"
                >
                    <button class="btn btn-light" id="sidebarToggle">â˜°</button>
                    <div class="dropdown">
                        <button
                            class="btn btn-secondary dropdown-toggle"
                            type="button"
                            id="dropdownMenuButton"
                            data-bs-toggle="dropdown"
                            aria-expanded="false"
                        >
                            Sunshine Coast Council
                        </button>
                        <ul
                            class="dropdown-menu"
                            aria-labelledby="dropdownMenuButton"
                        >
                            <li><a class="dropdown-item" href="#">All</a></li>
                            <li>
                                <a class="dropdown-item" href="#">UnityWater</a>
                            </li>
                            <li>
                                <a class="dropdown-item" href="#"
                                    >Sunshine Coast Council</a
                                >
                            </li>
                            <li>
                                <a class="dropdown-item" href="#"
                                    >Moreton Bay Council</a
                                >
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="sidebar" id="sidebar">
                <div
                    class="d-flex justify-content-between align-items-center p-3"
                >
                    <h5 class="m-0">Previous Questions</h5>
                    <button class="btn btn-close" id="sidebarClose"></button>
                </div>
                <ul class="list-group list-group-flush" id="questionList">
                    <!-- Previous questions will be added here dynamically -->
                </ul>
            </div>
            <div class="content" id="content">
                <div class="row">
                    <div class="col-12">
                        <div class="response-area mb-3" id="responseArea">
                            <!-- Responses will be added here dynamically -->
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12 d-flex justify-content-center">
                        <input
                            type="text"
                            class="form-control text-input mb-3"
                            id="questionInput"
                            placeholder="Ask a question"
                        />
                    </div>
                </div>
            </div>
        </div>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
        <script>
            document.addEventListener('DOMContentLoaded', function () {
                const sidebarToggle = document.getElementById('sidebarToggle')
                const sidebarClose = document.getElementById('sidebarClose')
                const sidebar = document.getElementById('sidebar')
                const content = document.getElementById('content')
                const dropdownItems =
                    document.querySelectorAll('.dropdown-item')
                const dropdownButton =
                    document.getElementById('dropdownMenuButton')
                const questionInput = document.getElementById('questionInput')
                const responseArea = document.getElementById('responseArea')
                const questionList = document.getElementById('questionList')

                sidebarToggle.addEventListener('click', function () {
                    sidebar.classList.add('active')
                    content.classList.add('active')
                })

                sidebarClose.addEventListener('click', function () {
                    sidebar.classList.remove('active')
                    content.classList.remove('active')
                })

                dropdownItems.forEach((item) => {
                    item.addEventListener('click', function (e) {
                        e.preventDefault()
                        const councils = {
                            All: 'all.html',
                            UnityWater: 'unitywater.html',
                            'Sunshine Coast Council':
                                'sunshine-coast-council.html',
                            'Moreton Bay Council': 'moreton-bay-council.html'
                        }
                        const url = councils[this.textContent.trim()] || '#'
                        window.location.href = url
                        dropdownButton.textContent = this.textContent
                    })
                })

                questionInput.addEventListener('keypress', function (e) {
                    if (e.key === 'Enter') {
                        const question = this.value.trim()
                        if (question) {
                            addResponse('You: ' + question)
                            addQuestionToSidebar(question)
                            this.value = ''
                            setTimeout(() => {
                                addResponse(
                                    'OnlyInfo: This is a mock response to your question.'
                                )
                            }, 1000)
                        }
                    }
                })

                function addResponse(text) {
                    let holder = 'p'
                    if (text.slice(0, 4) === 'You:') {
                        holder = 'b'
                    }
                    const p = document.createElement(holder)
                    p.textContent = text
                    responseArea.appendChild(p)
                    responseArea.scrollTop = responseArea.scrollHeight
                }

                function addQuestionToSidebar(question) {
                    const li = document.createElement('li')
                    li.className = 'list-group-item'
                    li.textContent = question
                    li.addEventListener('click', function () {
                        // Open a new window with the question and response
                        const newWindow = window.open('', '_blank')
                        newWindow.document.write('<h2>Question:</h2>')
                        newWindow.document.write('<p>' + question + '</p>')
                        newWindow.document.write('<h2>Response:</h2>')
                        newWindow.document.write(
                            '<p>This is a mock response to the question.</p>'
                        )
                    })
                    questionList.appendChild(li)
                }
            })
        </script>
    </body>
</html>
